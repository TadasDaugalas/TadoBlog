<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/fragments :: head(#{com.example.tadoblog.readmore.title})"></head>
<body>
<header th:insert="fragments/fragments :: navigation"></header>
<main>
 <div class="container">

   <div class="container">
   <div class="col background-white py-3">
    <div class="clearfix">
     <img th:src="@{/img/tropical-Fish.jpg}" class="col-md-4 mb-3 ms-md-3 rounded float-sm-start" alt="...">
     <p th:text="${readMore.cardText}"></p>
    </div>
   </div>
   </div>
   <div class="container">
     <div class="input-group mb-3">
      <form th:method="post" th:object="${comment}" th:action="@{/cards/readMore/{id}/addComment(id=${readMore.id})}">
      <input type="text"
             class="form-control"
             placeholder="Recipient's username"
             th:field="*{commentText}">
      <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Add Comment</button>
      </form>
     </div>

    Comments
    <div th:each="comment : ${readMore.comments}" th:if="${comment.getParentComment() == null}">
        <div th:text="${comment.commentText}"></div>

        <div class="ps-5"
                th:each="childComment : ${readMore.comments}"
             th:if="${childComment.getParentComment() != null && childComment.getParentComment().getId().equals(comment.getId())}"
        th:text="${childComment.commentText}">

        </div>

            <form  th:method="post" th:object="${comment}" th:action="@{/cards/readMore/{id}/addComment/{commentId}(id=${readMore.id},commentId=${comment.id})}">
        <input type="text"
                       class="form-control"
                       placeholder="Recipient's username"
                       th:field="*{commentText}">
                <button class="btn btn-outline-secondary" type="submit" id="button-addon">Add Comment</button>
            </form>
    </div>
   </div>
 </div>
</main>
<footer th:replace="fragments/fragments :: footer"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>
</html>